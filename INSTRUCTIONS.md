# Take-Home Assessment: AI Chat with Tool Use

## Overview

You have been given a working AI chat application built with Next.js, the Vercel AI SDK, and Claude. The chat interface is complete and functional — your task is to **implement two tools** that give the AI assistant new capabilities.

## What's Already Built

- **Chat UI** (`app/page.tsx`) — A complete chat interface with message rendering, streaming support, and markdown formatting
- **API Route** (`app/api/chat/route.ts`) — Backend route that connects to Claude via the Vercel AI SDK, with tool definitions already wired up
- **Tool Stubs** (`lib/tools/weather.ts`, `lib/tools/analyze.ts`) — Files with exported tool schemas, ready for you to implement

## Your Tasks

### Task 1: Weather Data Tool (`lib/tools/weather.ts`)

Implement a tool that fetches weather forecast data from the [Open-Meteo API](https://open-meteo.com/en/docs).

**Requirements:**
- Define the tool's parameter schema using Zod (latitude, longitude, forecast days, weather variables)
- Make HTTP requests to the Open-Meteo API
- Return structured forecast data (temperature, precipitation, wind, etc.)
- Handle errors gracefully (API failures, invalid responses)

**Open-Meteo API details:**
- Base URL: `https://api.open-meteo.com/v1/forecast`
- Free, no API key required
- Example: `?latitude=35.68&longitude=139.65&daily=temperature_2m_max,temperature_2m_min&timezone=auto`

**When complete, you should be able to ask:**
- "What's the weather in Tokyo this week?"
- "Will it rain in London tomorrow?"
- "Compare temperatures in New York and Miami for the next 5 days"

### Task 2: Python Code Analysis Tool (`lib/tools/analyze.ts`)

Implement a tool that executes Python code generated by the LLM for data analysis and calculations.

**Requirements:**
- Accept a Python code string as input
- Execute it using `child_process` (execSync or spawnSync)
- Set a timeout (e.g., 10 seconds) to prevent infinite loops
- Return stdout, stderr, and exit code
- Handle errors (timeout, Python not found, syntax errors)

**When complete, you should be able to ask:**
- "Calculate the first 20 Fibonacci numbers"
- "Analyze this data: [1, 5, 3, 8, 2] — give me mean, median, and standard deviation"
- "Write a Python script that generates a multiplication table"

**Safety notes:**
- This tool runs code on your local machine — that's fine for this assessment
- In production, code execution would be sandboxed (Docker, etc.)
- Python 3 must be installed on your machine

## Getting Started

1. Copy `.env.example` to `.env` and add your Anthropic API key
2. Run `npm install`
3. Run `npm run dev`
4. Open http://localhost:3000
5. Verify basic chat works (send a message, get a response)
6. Implement the tools in `lib/tools/weather.ts` and `lib/tools/analyze.ts`

## Evaluation Criteria

- **Correctness** — Do the tools work as described?
- **Error handling** — Does the code handle edge cases and failures gracefully?
- **Code quality** — Is the code clean, readable, and well-organized?
- **API design** — Are the tool parameter schemas well-defined?

## Helpful Resources

- [Vercel AI SDK — Tool Calling](https://sdk.vercel.ai/docs/ai-sdk-core/tools-and-tool-calling)
- [Open-Meteo API Docs](https://open-meteo.com/en/docs)
- [Zod Documentation](https://zod.dev)
- [Node.js child_process](https://nodejs.org/api/child_process.html)

## Time Expectation

This assessment is designed to take roughly **1-2 hours**. Focus on getting the tools working correctly with good error handling. Don't worry about adding extra features — clean, working code is what we're looking for.
